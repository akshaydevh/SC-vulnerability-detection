const { ethers, upgrades } = require("hardhat");

async function deployDepositV2(proxy) {
    try {
        const DepositV2 = await ethers.getContractFactory("Deposit_V2");
        console.log("Upgrading DepositV1 to DepositV2");
        console.log("Deploying DepositV2");
        const depositV2 = await upgrades.upgradeProxy(proxy, DepositV2, { initializer: '__Deposit_V2_init' });
        await depositV2.waitForDeployment();
        const address = await depositV2.getAddress();
        console.log("DepositV2 deployed to:", address);
    } catch (error) {
        console.error("Failed to upgrade DepositV1 to DepositV2 : ",error);
    }
}
deployDepositV2("0x499985e0cCdbC7b1A0F627323f1A2dB65a7E1157");